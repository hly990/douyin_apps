<view class="container">
  <!-- å¤´éƒ¨å¯¼èˆªæ  -->
  <view class="header">
    <view class="back-btn" bindtap="navigateBack">
      <text class="back-icon">â†</text>
    </view>
    <view class="title">è§‚çœ‹å†å²</view>
    <view class="clear-btn" bindtap="showClearConfirm">æ¸…ç©º</view>
  </view>

  <!-- å†å²è§†é¢‘åˆ—è¡¨ -->
  <scroll-view class="video-list" scroll-y="{{true}}" bindscrolltolower="onReachBottom">
    <block tt:if="{{historyList.length > 0}}">
      <view class="video-item" tt:for="{{historyList}}" tt:key="id" bindtap="navigateToVideo" data-id="{{item.id}}">
        <view class="video-cover">
          <image src="{{item.coverUrl}}" mode="aspectFill"></image>
          <view class="video-duration">{{item.duration}}</view>
          <view class="watched-progress" style="width: {{item.progress || 0}}%;"></view>
        </view>
        <view class="video-info">
          <view class="video-title">{{item.title}}</view>
          <view class="video-stats">
            <view class="video-author">{{item.author.nickname}}</view>
            <view class="watch-time">{{item.watchTime}}</view>
          </view>
        </view>
      </view>
    </block>

    <!-- ç©ºçŠ¶æ€å±•ç¤º -->
    <view class="empty-state" tt:if="{{historyList.length === 0 && !loading}}">
      <text class="empty-icon">ğŸ•’</text>
      <text class="empty-text">è¿˜æ²¡æœ‰è§‚çœ‹è®°å½•å“¦ï¼Œå»é¦–é¡µçœ‹çœ‹å§~</text>
    </view>

    <!-- åŠ è½½ä¸­çŠ¶æ€ -->
    <view class="loading" tt:if="{{loading}}">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- åº•éƒ¨æç¤º -->
    <view class="list-footer" tt:if="{{historyList.length > 0 && !hasMore}}">
      <text class="footer-text">æ²¡æœ‰æ›´å¤šäº†~</text>
    </view>
  </scroll-view>
</view> 